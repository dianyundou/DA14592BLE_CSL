<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SmartSnippets DA1459x SDK: Secure image programming procedure</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SmartSnippets DA1459x SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Secure image programming procedure </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md152"></a>
Prerequisites</h2>
<ul>
<li>All scripts require <em>Python 3</em>.</li>
<li>If Python supports GUI mode (<em>Tkinter</em> package is required), the whole configuration will be done using popup-windows.</li>
<li>Otherwise, scripts will use the simple command line interpreter.</li>
</ul>
<h2><a class="anchor" id="autotoc_md153"></a>
1. Check tools</h2>
<p>The tools required for secure image programming are the same as the tools required for typical flash memory programming, i.e. <code>cli_programmer</code> and <code>mkimage</code>. Both tools must be located in the <code>binaries/</code> directory.</p>
<h2><a class="anchor" id="autotoc_md154"></a>
2. Import python_scripts project to IDE</h2>
<p>This project includes a collection of <code>python scripts</code> intended for being executed from a command line, as well as some launchers intended for use with IDE as <code>External Tools</code>. Both methods achieve the same results. In the first is chosen this step in out of scope.</p>
<h2><a class="anchor" id="autotoc_md155"></a>
3. Create Embedded Flash programming configuration file</h2>
<p>Execute the <code>utilities/python_scripts/eflash/program_eflash_config.py</code> script or run the <code>program_eflash_config</code> launcher, and provide the following options:</p>
<ul>
<li>Product ID: DA1459x-00</li>
<li>Flash Configuration: EFLASH</li>
<li>active FW image address: 0x2000 (default) or another specified address.</li>
<li>update FW image address: 0x2000 (default) or another specified address.</li>
</ul>
<p>Upon execution, the <code>program_eflash.xml</code> file will be generated in the directory <code>utilities/python_scripts/eflash</code>, and the following log message will be printed out:</p>
<div class="fragment"><div class="line">........................................................................................................................</div>
<div class="line">..</div>
<div class="line">.. PROGRAM EFLASH CONFIGURATOR</div>
<div class="line">..</div>
<div class="line">........................................................................................................................</div>
<div class="line">.</div>
<div class="line">........................................................................................................................</div>
<div class="line">..</div>
<div class="line">.. Active FW Image Address</div>
<div class="line"> </div>
<div class="line">..</div>
<div class="line">........................................................................................................................</div>
<div class="line">........................................................................................................................</div>
<div class="line">..</div>
<div class="line">.. Update FW Image Address</div>
<div class="line"> </div>
<div class="line">..</div>
<div class="line">........................................................................................................................</div>
<div class="line">.</div>
<div class="line">........................................................................................................................</div>
<div class="line">..</div>
<div class="line">.. FINISHED</div>
<div class="line">..</div>
<div class="line">........................................................................................................................</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md156"></a>
4. Create product keys and secure image configuration files</h2>
<p>Execute the <code>utilities/python_scripts/secure_image/secure_keys_cfg.py</code> script or run the <code>secure_config</code> launcher and provide the following options:</p>
<ul>
<li>Would you like to create product keys file?: Yes</li>
<li>Product ID: DA1459x-00</li>
<li>Select elliptic curve used for asymmetric keys: EDWARDS25519</li>
<li>Would you like to configure sticky bits in CS?: Yes/No</li>
<li>Select sticky bits to be enabled in CS:<ul>
<li>PROT_INFO_PAGE</li>
<li>SECURE_BOOT</li>
<li>FORCE_CMAC_DEBUGGER_OFF</li>
<li>FORCE_M33_DEBUGGER_OFF</li>
<li>PROT_USER_APP_CODE</li>
<li>PROT_VALID_KEY</li>
<li>PROT_APP_KEY</li>
<li>PROT_CONFIG_SCRIPT</li>
</ul>
</li>
<li>Select public key index: One of the provided options</li>
<li>Would you like to add key revocations?: No/Yes</li>
<li>Please provide current version of the firmware (in decimal):</li>
<li>Would you like to add minimal version?: No/Yes</li>
</ul>
<p>Upon execution, the <code>product_keys.xml</code> and <code>secure_cfg.xml</code> file will be generated in the directory <code>utilities/python_scripts/secure_image</code>, and an identical to the following log message will be printed out:</p>
<div class="fragment"><div class="line">........................................................................................................................</div>
<div class="line">..</div>
<div class="line">.. SECURE IMAGE CONFIGURATOR</div>
<div class="line">..</div>
<div class="line">........................................................................................................................</div>
<div class="line">.</div>
<div class="line">. Writing keys to product_keys.xml</div>
<div class="line">Generating 8 keys (256-bits)...</div>
<div class="line">    #1: 0037FA922E1A281B6CB0FC256432623A357421F373214D85680E5169CF9242CF</div>
<div class="line">    #2: C93C61F7568A13C23A0FE89F424AD977BEFA6B321BB8B784C608ED959A2F6463</div>
<div class="line">    #3: 6BC65BC2506E848A7D6C29BFB6033775FDA2A7195A5E9D21668AB601BA1B6425</div>
<div class="line">    #4: E1BFE7312D6CBBABD8E56A8FE8A104E543ABFE9E099BBF6F267570E090D50571</div>
<div class="line">    #5: 94EDA2C2595E6D3143D7C02B79C410BC6F0F5A78AA19E8D08F58B01F2DB691C2</div>
<div class="line">    #6: A33384FC91F12DD4C8EEFF41B210FE221F589AC972829A01DB4A200800B1CAA3</div>
<div class="line">    #7: E54E9F763FCD4B08BB4A496D5A478F79A02A4312ACDD138727339028E55ACBCA</div>
<div class="line">    #8: A96B40E8388BF0F3D63A603081F0AA211AED33C6CA464EF17ADE195F38E529E1</div>
<div class="line">Generating 8 keys on EDWARDS25519 elliptic curve...</div>
<div class="line">    #1 (private key length: 32, public key length: 32):</div>
<div class="line">        PRIVATE KEY: 6F1DCAA21CDBA048C6876B0DDECDA7A94FEB5B5F671C85CA8960337BADE8A01C</div>
<div class="line">        PUBLIC KEY:  7F858469416548F5D05FBC71332508E6634DA7CD7DA2FCC92EB010894BEF7F85</div>
<div class="line">    #2 (private key length: 32, public key length: 32):</div>
<div class="line">        PRIVATE KEY: BCB5504818187368A8C84406AFA10876ED729CF11B5136413CD96C67D4834E90</div>
<div class="line">        PUBLIC KEY:  33D18AB2DE1D7C3DA4FB5015520B8EEE0E5F57FD2D3D1E133646E4A17BED5668</div>
<div class="line">    #3 (private key length: 32, public key length: 32):</div>
<div class="line">        PRIVATE KEY: F773428BEDB41D6229C8A47D8B6CCCB66E64EE931B8649B1E0B9702B35DD7F2C</div>
<div class="line">        PUBLIC KEY:  2987190B7A3AD892D9CF6AFFD4417212D2E5AAA0778ADAACFFF8A3DEBF2C893B</div>
<div class="line">    #4 (private key length: 32, public key length: 32):</div>
<div class="line">        PRIVATE KEY: 5F5740CE335BFB5C316FEFE6145B5F49802CF03B7723F169D2BC9CBB22ABE681</div>
<div class="line">        PUBLIC KEY:  112D8370533F769A93C66155ADF8C5C63EED64B8BE3B3FDB0D3CD9A0FA713362</div>
<div class="line">    #5 (private key length: 32, public key length: 32):</div>
<div class="line">        PRIVATE KEY: E39CB6723908F27DA8E5E3D0763E9941780EA43963C6397F0DCDD78666C3BE49</div>
<div class="line">        PUBLIC KEY:  7B10B5D55F3BA15217633BE894FB13A75B6C16D4D140B814AAC7EB492EC6F204</div>
<div class="line">    #6 (private key length: 32, public key length: 32):</div>
<div class="line">        PRIVATE KEY: D5643B08C7E8D42087868EA1056B3BA66D463B2F012712EB5B5061C27EA6AF53</div>
<div class="line">        PUBLIC KEY:  9E225C0D2D685AC72F263D4CE41A264681F3228326E83A5CD2FA507BE33F338B</div>
<div class="line">    #7 (private key length: 32, public key length: 32):</div>
<div class="line">        PRIVATE KEY: 8DD9A8A8C1651855A4620D7F34F2B2EB0C5D13B7446361091E2726F6F3FF6D80</div>
<div class="line">        PUBLIC KEY:  8F58249F0466B4B39D38D0172D562970DE6E3173040D3CCABB9457B783C05C40</div>
<div class="line">    #8 (private key length: 32, public key length: 32):</div>
<div class="line">        PRIVATE KEY: 77257C3A278AE22701751087A9D2A93AAFDEDA06C114D7EC73D4C2EA54ACE7CB</div>
<div class="line">        PUBLIC KEY:  89DA51D9CBF4B9ECAAA855DDDA0DEB7D10F513F516B8D0C69ECE9FF2DE7CDB84</div>
<div class="line">. Using product keys file: product_keys.xml</div>
<div class="line">. Configuration saved to secure_cfg.xml</div>
<div class="line">.</div>
<div class="line">........................................................................................................................</div>
<div class="line">..</div>
<div class="line">.. FINISHED</div>
<div class="line">..</div>
<div class="line">........................................................................................................................</div>
</div><!-- fragment --><blockquote class="doxtable">
<p><em>Note</em>: Ensure that you do not remove/misplace the product keys file. Without it, it will be impossible to update the software on a device with programmed keys and enabled secure boot. The same configuration/product keys file can be utilized for programming multiple devices of the same type. </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md157"></a>
5. Build application binary</h2>
<p>Build the application you intend to program into the device's embedded flash memory. Make sure to choose either a Release or Debug build configuration, such as <code>DA1459x-00-Release_eFLASH</code> or <code>DA1459x-00-Debug_eFLASH</code>.</p>
<blockquote class="doxtable">
<p><em>Note</em>: Please note that the secure image feature is only supported by the <code>pxp_reporter</code> and <code>ble_adv</code> applications provided by the SDK. </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md158"></a>
6. Program application image</h2>
<p>To generate a signed image from the application binary file, created at step 5, and program it to the embedded flash memory, execute the <code>utilities/python_scripts/secure_image/secure_img_prog.py</code> script via JLink or Serial interface, or run the <code>secure_keys_img_jtag</code>/ <code>secure_keys_img_serial</code> launcher. In the first case, if the <code>product_keys.xml</code> and <code>secure_cfg.xml</code> files are not located in the default directory, their paths need also to be specified, and in turns, the path of the binary file has to be passed as input argument to the script. In the second case, ensure that you have selected the application project before running the launcher. This step is crucial for the launcher to locate the necessary *.xml and binary files correctly.</p>
<h2><a class="anchor" id="autotoc_md159"></a>
7. Program the Configuration Script and the Product Keys</h2>
<p>During this step, the Configuration Script (CS) and the Product Keys, as specified at step 4, will be written to their respective locations within the Embedded Flash (CS: 0x000 - 0xFFF - User Application Keys: 0x800 - 0xBFF - Signature Keys: 0xC00 - 0xFFF). Depending on whether the mentioned fields are already written or not, and if they are, whether the new values match the existing ones, the script will execute specific actions accordingly.</p>
<p>To initiate the operation, execute the <code>utilities/python_scripts/secure_image/secure_keys_prog.py</code> script, via JLink or Serial interface, specifying the paths to the <code>product_keys.xml</code> and <code>secure_cfg.xml</code> files, if they are in different directory than the default location, or run the <code>secure_keys_prog_jtag</code>/<code>secure_keys_prog_serial</code> launcher.</p>
<p>Upon execution, a log message identical to the following will be printed out, informing the user about the actions that have been peformed:</p>
<div class="fragment"><div class="line">........................................................................................................................</div>
<div class="line">..</div>
<div class="line">.. PROGRAM PRODUCT KEYS AND CS (eFlash)</div>
<div class="line">..</div>
<div class="line">........................................................................................................................</div>
<div class="line">.</div>
<div class="line">. Using product keys file: &lt;SDK_ROOT_PATH&gt;/utilities/python_scripts/secure_image/product_keys.xml</div>
<div class="line">. Using secure configuration file: &lt;SDK_ROOT_PATH&gt;/utilities/python_scripts/secure_image/secure_cfg.xml</div>
<div class="line">........................................................................................................................</div>
<div class="line">..</div>
<div class="line">.. Programming product keys</div>
<div class="line">..</div>
<div class="line">........................................................................................................................</div>
<div class="line">cli_programmer 1.26</div>
<div class="line">Copyright (c) 2015-2023 Dialog Semiconductor</div>
<div class="line"> </div>
<div class="line">bootloader file not specified, using internal uartboot.bin</div>
<div class="line"> </div>
<div class="line">Uploading boot loader/application executable...</div>
<div class="line">Executable uploaded.</div>
<div class="line"> </div>
<div class="line">0300   8D 14 82 F9</div>
<div class="line">0301   C1 C2 6E B7</div>
<div class="line">0302   B5 56 4C F5</div>
<div class="line">0303   DC CE B3 06</div>
<div class="line">0304   4A D9 81 81</div>
<div class="line">0305   60 A0 E2 60</div>
<div class="line">0306   7A D1 37 EA</div>
<div class="line">0307   2F CB 77 32</div>
<div class="line">0308   AF 87 15 6F</div>
<div class="line">0309   AF 88 8D BF</div>
<div class="line">030A   39 3F 76 74</div>
<div class="line">030B   BF F0 BD 6D</div>
<div class="line">030C   2B 35 CD C5</div>
<div class="line">030D   DB A5 B0 C5</div>
<div class="line">030E   74 7F D6 C3</div>
<div class="line">030F   C6 83 5B 4F</div>
<div class="line">0310   EE E6 AC 86</div>
<div class="line">0311   03 05 05 E4</div>
<div class="line">0312   29 7D 02 77</div>
<div class="line">0313   DE 03 13 BD</div>
<div class="line">0314   AB D1 85 00</div>
<div class="line">0315   AA F2 3E 82</div>
<div class="line">0316   13 F7 1C BE</div>
<div class="line">0317   80 73 66 82</div>
<div class="line">0318   A2 BD F5 24 </div>
<div class="line">0319   BF 16 C5 FB</div>
<div class="line">031A   F8 A4 86 2C</div>
<div class="line">031B   91 9B B8 54</div>
<div class="line">031C   58 2F 11 FE</div>
<div class="line">031D   7D 03 59 3A</div>
<div class="line">031E   5B 16 0B C6</div>
<div class="line">031F   52 B0 83 D2</div>
<div class="line">0320   36 C2 EC FD</div>
<div class="line">0321   90 C5 BB 59</div>
<div class="line">0322   A9 41 C4 15</div>
<div class="line">0323   19 43 E2 E0</div>
<div class="line">0324   55 DD 70 8F</div>
<div class="line">0325   F9 B6 DF D5</div>
<div class="line">0326   65 D0 B4 EC</div>
<div class="line">0327   C8 26 3F B1</div>
<div class="line">0328   2C 32 73 70</div>
<div class="line">0329   D0 26 A7 84</div>
<div class="line">032A   03 D3 26 A6</div>
<div class="line">032B   29 9D F4 AD</div>
<div class="line">032C   EA B4 90 BE</div>
<div class="line">032D   BD 7E D4 0A</div>
<div class="line">032E   34 18 FF AA</div>
<div class="line">032F   0F 17 C8 8A</div>
<div class="line">0330   57 45 D5 A6</div>
<div class="line">0331   7E 37 D0 55</div>
<div class="line">0332   B6 80 AE 64</div>
<div class="line">0333   CB 48 8E 1A</div>
<div class="line">0334   85 BD D9 47</div>
<div class="line">0335   3E CD 3B AF</div>
<div class="line">0336   99 00 B3 DF</div>
<div class="line">0337   8C 32 D2 56</div>
<div class="line">0338   56 24 2D 94</div>
<div class="line">0339   65 F7 12 EB</div>
<div class="line">033A   F9 AB 20 5D</div>
<div class="line">033B   4F 24 14 90</div>
<div class="line">033C   E1 B9 04 72</div>
<div class="line">033D   1D BA 22 D5</div>
<div class="line">033E   18 9C E8 37</div>
<div class="line">033F   64 6E 04 33</div>
<div class="line"> </div>
<div class="line">done.</div>
<div class="line"> </div>
<div class="line">cli_programmer 1.26</div>
<div class="line">Copyright (c) 2015-2023 Dialog Semiconductor</div>
<div class="line"> </div>
<div class="line">bootloader file not specified, using internal uartboot.bin</div>
<div class="line"> </div>
<div class="line">Uploading boot loader/application executable...</div>
<div class="line">Executable uploaded.</div>
<div class="line"> </div>
<div class="line">0200   00 00 00 00   ....</div>
<div class="line">0201   00 00 00 00   ....</div>
<div class="line">0202   00 00 00 00   ....</div>
<div class="line">0203   00 00 00 00   ....</div>
<div class="line">0204   00 00 00 00   ....</div>
<div class="line">0205   00 00 00 00   ....</div>
<div class="line">0206   00 00 00 00   ....</div>
<div class="line">0207   00 00 00 00   ....</div>
<div class="line">0208   00 00 00 00   ....</div>
<div class="line">0209   00 00 00 00   ....</div>
<div class="line">020A   00 00 00 00   ....</div>
<div class="line">020B   00 00 00 00   ....</div>
<div class="line">020C   00 00 00 00   ....</div>
<div class="line">020D   00 00 00 00   ....</div>
<div class="line">020E   00 00 00 00   ....</div>
<div class="line">020F   00 00 00 00   ....</div>
<div class="line">0210   00 00 00 00   ....</div>
<div class="line">0211   00 00 00 00   ....</div>
<div class="line">0212   00 00 00 00   ....</div>
<div class="line">0213   00 00 00 00   ....</div>
<div class="line">0214   00 00 00 00   ....</div>
<div class="line">0215   00 00 00 00   ....</div>
<div class="line">0216   00 00 00 00   ....</div>
<div class="line">0217   00 00 00 00   ....</div>
<div class="line">0218   00 00 00 00   ....</div>
<div class="line">0219   00 00 00 00   ....</div>
<div class="line">021A   00 00 00 00   ....</div>
<div class="line">021B   00 00 00 00   ....</div>
<div class="line">021C   00 00 00 00   ....</div>
<div class="line">021D   00 00 00 00   ....</div>
<div class="line">021E   00 00 00 00   ....</div>
<div class="line">021F   00 00 00 00   ....</div>
<div class="line">0220   00 00 00 00   ....</div>
<div class="line">0221   00 00 00 00   ....</div>
<div class="line">0222   00 00 00 00   ....</div>
<div class="line">0223   00 00 00 00   ....</div>
<div class="line">0224   00 00 00 00   ....</div>
<div class="line">0225   00 00 00 00   ....</div>
<div class="line">0226   00 00 00 00   ....</div>
<div class="line">0227   00 00 00 00   ....</div>
<div class="line">0228   00 00 00 00   ....</div>
<div class="line">0229   00 00 00 00   ....</div>
<div class="line">022A   00 00 00 00   ....</div>
<div class="line">022B   00 00 00 00   ....</div>
<div class="line">022C   00 00 00 00   ....</div>
<div class="line">022D   00 00 00 00   ....</div>
<div class="line">022E   00 00 00 00   ....</div>
<div class="line">022F   00 00 00 00   ....</div>
<div class="line">0230   00 00 00 00   ....</div>
<div class="line">0231   00 00 00 00   ....</div>
<div class="line">0232   00 00 00 00   ....</div>
<div class="line">0233   00 00 00 00   ....</div>
<div class="line">0234   00 00 00 00   ....</div>
<div class="line">0235   00 00 00 00   ....</div>
<div class="line">0236   00 00 00 00   ....</div>
<div class="line">0237   00 00 00 00   ....</div>
<div class="line">0238   00 00 00 00   ....</div>
<div class="line">0239   00 00 00 00   ....</div>
<div class="line">023A   00 00 00 00   ....</div>
<div class="line">023B   00 00 00 00   ....</div>
<div class="line">023C   00 00 00 00   ....</div>
<div class="line">023D   00 00 00 00   ....</div>
<div class="line">023E   00 00 00 00   ....</div>
<div class="line">023F   00 00 00 00   ....</div>
<div class="line">done.</div>
<div class="line">........................................................................................................................</div>
<div class="line">..</div>
<div class="line">.. Checking key revocation status</div>
<div class="line">..</div>
<div class="line">........................................................................................................................</div>
<div class="line">cli_programmer 1.26</div>
<div class="line">Copyright (c) 2015-2023 Dialog Semiconductor</div>
<div class="line"> </div>
<div class="line">bootloader file not specified, using internal uartboot.bin</div>
<div class="line"> </div>
<div class="line">Uploading boot loader/application executable...</div>
<div class="line">Executable uploaded.</div>
<div class="line"> </div>
<div class="line">01F8   FF FF FF FF   ....</div>
<div class="line">01F9   FF FF FF FF   ....</div>
<div class="line">01FA   FF FF FF FF   ....</div>
<div class="line">01FB   FF FF FF FF   ....</div>
<div class="line">01FC   FF FF FF FF   ....</div>
<div class="line">01FD   FF FF FF FF   ....</div>
<div class="line">01FE   FF FF FF FF   ....</div>
<div class="line">01FF   FF FF FF FF   ....</div>
<div class="line">done.</div>
<div class="line">cli_programmer 1.26</div>
<div class="line">Copyright (c) 2015-2023 Dialog Semiconductor</div>
<div class="line"> </div>
<div class="line">bootloader file not specified, using internal uartboot.bin</div>
<div class="line"> </div>
<div class="line">Uploading boot loader/application executable...</div>
<div class="line">Executable uploaded.</div>
<div class="line"> </div>
<div class="line">01F0   FF FF FF FF   ....</div>
<div class="line">01F1   FF FF FF FF   ....</div>
<div class="line">01F2   FF FF FF FF   ....</div>
<div class="line">01F3   FF FF FF FF   ....</div>
<div class="line">01F4   FF FF FF FF   ....</div>
<div class="line">01F5   FF FF FF FF   ....</div>
<div class="line">01F6   FF FF FF FF   ....</div>
<div class="line">01F7   FF FF FF FF   ....</div>
<div class="line">done.</div>
<div class="line">........................................................................................................................</div>
<div class="line">..</div>
<div class="line">.. Script execution report</div>
<div class="line">..</div>
<div class="line">........................................................................................................................</div>
<div class="line">.</div>
<div class="line">. Checking configuration and product keys files... PASS</div>
<div class="line">. Checking product ID... PASS</div>
<div class="line">. Product keys verification... PASS</div>
<div class="line">. Checking eFlash memory emptiness (keys area)... FAIL</div>
<div class="line">. Matching the programmed eFlash keys with the ones in product keys file... FAIL</div>
<div class="line">. Writing keys to the eFlash memory... NOT RUN</div>
<div class="line">. Reading revocation info from eFlash... PASS</div>
<div class="line">.   Revoked signature keys: []</div>
<div class="line">.   Revoked user data keys: []</div>
<div class="line">. Enabling secure boot feature in configuration script... NOT RUN</div>
<div class="line">.   Product keys from file do not match to the keys read from eFlash.</div>
<div class="line">.</div>
<div class="line">........................................................................................................................</div>
<div class="line">..</div>
<div class="line">.. FINISHED</div>
<div class="line">..</div>
<div class="line">........................................................................................................................</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md160"></a>
8. Reboot device</h2>
<p>After completing all the previous steps successfully, press the Reset button on the daughterboard to initiate the application, which should start running.</p>
<h2><a class="anchor" id="autotoc_md161"></a>
Increase device security</h2>
<p>To enhance device security, you can perform the following additional actions:</p>
<ul>
<li>Disable debugger</li>
<li>Disable the CPU's ability to read and/or write the User Application Keys area.</li>
<li>Disable the CPU's ability to read and/or write the Signature Keys.</li>
<li>Disable the Development Mode in CS (this function disables the ability to receive application code from UART and debugger).</li>
</ul>
<blockquote class="doxtable">
<p><em>Note</em>: Please be aware that disabling the Debugger or the Development Mode means that the only option for updating the software on the device will be through Software Update over the Air (SUOTA) service. Hence, the application programmed in flash must support this feature to enable software updates remotely. </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md162"></a>
Known restrictions and limitations</h2>
<ul>
<li>The process in step 4 always generates 8 User Application and Signature Keys. If you wish to use fewer keys, you must manually edit the <code>product_keys.xml</code> file. Please note that the script cannot write the remaining keys; instead, they need to be manually written using <code>cli_programmer</code>.</li>
<li>The <code>secure_keys_cfg.py</code> script and the <code>secure_config</code> launcher cannot overwrite the <code>product_keys.xml</code>. If you need to change keys, you must manually remove the file. In such a case, make sure to keep a backup of the previous keys file in a different location.</li>
<li>The scripts do not verify which keys are already revoked (this information is only provided as a log). If a key has been revoked</li>
<li>and its revocation is requested again, no action will be taken for the specified key.</li>
</ul>
<h2><a class="anchor" id="autotoc_md163"></a>
Troubleshooting</h2>
<p>When the programmed application image cannot be booted on the device, check the following:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Possible Cause  </th><th class="markdownTableHeadNone">Recommended Action   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Secure boot support is not enabled in the configuration script.  </td><td class="markdownTableBodyNone">Enable it and perform step 7 again.   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">The signature used for image generation does not match to the key that is stored in the eFlash memory.  </td><td class="markdownTableBodyNone">Make sure that there is no other product keys file that might have been programmed to the eFlash memory earlier. Perform step 7 again and check the status of the relevant step in the short report ('Matching the programmed eFlash keys with the ones in product keys file..').   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Used signature key has been revoked by the previous image.  </td><td class="markdownTableBodyNone">At least one key in each category must be valid. Try to use another key index. Perform step 7 again and check which keys are already revoked on the device.   </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Apr 1 2025 18:15:25 for SmartSnippets DA1459x SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
